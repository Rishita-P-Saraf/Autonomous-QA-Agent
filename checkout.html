<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>E-Shop Checkout</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .error { color: red; }
        .success { color: green; }
        .item { margin-bottom: 10px; }
        label { display: block; margin-top: 5px; }
        input[type="text"], input[type="email"] { width: 200px; }
        .pay-button { background-color: green; color: white; padding: 10px 20px; border: none; cursor: pointer; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>E-Shop Checkout</h1>

    <h2>Items</h2>
    <div class="item">
        <span>Item 1 - $20</span>
        <button id="add_item1">Add to Cart</button>
    </div>
    <div class="item">
        <span>Item 2 - $35</span>
        <button id="add_item2">Add to Cart</button>
    </div>
    <div class="item">
        <span>Item 3 - $50</span>
        <button id="add_item3">Add to Cart</button>
    </div>

    <h2>Cart Summary</h2>
    <label>Item 1 Quantity: <input type="number" id="qty_item1" value="0" min="0"></label>
    <label>Item 2 Quantity: <input type="number" id="qty_item2" value="0" min="0"></label>
    <label>Item 3 Quantity: <input type="number" id="qty_item3" value="0" min="0"></label>
    <label>Discount Code: <input type="text" id="discount_code"></label>
    <div>Total Price: $<span id="total_price">0</span></div>

    <h2>User Details</h2>
    <label>Name: <input type="text" id="name"></label>
    <span class="error" id="error_name"></span>
    <label>Email: <input type="email" id="email"></label>
    <span class="error" id="error_email"></span>
    <label>Address: <input type="text" id="address"></label>
    <span class="error" id="error_address"></span>

    <h2>Shipping Method</h2>
    <label><input type="radio" name="shipping" value="Standard"> Standard (Free)</label>
    <label><input type="radio" name="shipping" value="Express"> Express ($10)</label>

    <h2>Payment Method</h2>
    <label><input type="radio" name="payment" value="Credit Card"> Credit Card</label>
    <label><input type="radio" name="payment" value="PayPal"> PayPal</label>

    <br>
    <button class="pay-button" id="pay_now">Pay Now</button>
    <div id="payment_msg" class="success"></div>

    <script>
        const prices = { item1: 20, item2: 35, item3: 50 };
        const discount_codes = { SAVE15: 0.15 };

        function calculateTotal() {
            let total = 0;
            total += document.getElementById("qty_item1").value * prices.item1;
            total += document.getElementById("qty_item2").value * prices.item2;
            total += document.getElementById("qty_item3").value * prices.item3;

            const code = document.getElementById("discount_code").value;
            if (discount_codes[code]) total *= (1 - discount_codes[code]);

            const shipping = document.querySelector('input[name="shipping"]:checked');
            if (shipping && shipping.value === "Express") total += 10;

            document.getElementById("total_price").textContent = total.toFixed(2);
        }

        document.querySelectorAll("input").forEach(inp => inp.addEventListener("change", calculateTotal));
        document.querySelectorAll("input[type='number']").forEach(inp => inp.addEventListener("input", calculateTotal));

        document.getElementById("pay_now").addEventListener("click", () => {
            let valid = true;
            ["name","email","address"].forEach(id => {
                const val = document.getElementById(id).value;
                document.getElementById("error_"+id).textContent = "";
                if(!val) {
                    document.getElementById("error_"+id).textContent = "Required field";
                    valid = false;
                }
            });
            const emailVal = document.getElementById("email").value;
            if(emailVal && !emailVal.includes("@")) {
                document.getElementById("error_email").textContent = "Invalid email";
                valid = false;
            }

            if(valid) {
                document.getElementById("payment_msg").textContent = "Payment Successful!";
                calculateTotal();
            } else {
                document.getElementById("payment_msg").textContent = "";
            }
        });
    </script>
</body>
</html>
